<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometry Dash Mini - Yusuf</title>
<style>
body {
  margin:0;
  overflow:hidden;
  background:#111;
  font-family:sans-serif;
}
canvas {
  display:block;
  margin:auto;
  background:#000;
  border:3px solid #0af;
  border-radius:12px;
}
#score {
  position:absolute;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  color:#0af;
  font-size:24px;
  font-weight:bold;
  text-shadow: 0 0 5px #0af;
}
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="game" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

// Player
let player = {x:100, y:300, w:30, h:30, vy:0, jumping:false};

// Physics
let gravity = 0.8;
let jumpPower = -15;

// Obstacles and platforms
let obstacles = [];
let platforms = [];
platforms.push({x:0, y:350, w:canvas.width, h:50});

// Background layers
let bgLayers = [
  {x:0, y:0, w:canvas.width, h:canvas.height, speed:0.2, color:'#111'},
  {x:0, y:0, w:canvas.width, h:canvas.height, speed:0.5, color:'#222'}
];

// Game state
let spawnTimer = 0;
let speed = 5;
let score = 0;
let highScore = 0;
let gameOver = false;

// Controls
document.addEventListener('keydown', e=>{if(e.code==='Space') jump();});
canvas.addEventListener('click', jump);

function jump(){
  if(!player.jumping){player.vy=jumpPower;player.jumping=true;}
}

// Spawn obstacle
function spawnObstacle(){
  let height = 30 + Math.random()*50;
  obstacles.push({x:canvas.width, y:350-height, w:30, h:height});
}

// Draw spike
function drawSpike(x,y,w,h){
  ctx.fillStyle='#f00';
  ctx.beginPath();
  ctx.moveTo(x,y+h);
  ctx.lineTo(x+w/2,y);
  ctx.lineTo(x+w,y+h);
  ctx.closePath();
  ctx.fill();
}

// Draw platform
function drawPlatform(p){
  ctx.fillStyle='#0af';
  ctx.shadowColor = '#0ff';
  ctx.shadowBlur = 10;
  ctx.fillRect(p.x,p.y,p.w,p.h);
  ctx.shadowBlur = 0;
}

// Draw background layers
function drawBackground(){
  bgLayers.forEach(layer=>{
    ctx.fillStyle=layer.color;
    ctx.fillRect(layer.x,layer.y,layer.w,layer.h);
    layer.x -= layer.speed;
    if(layer.x <= -canvas.width) layer.x = 0;
  });
}

// Update game
function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBackground();

  if(gameOver){
    ctx.fillStyle='#fff';
    ctx.font='30px sans-serif';
    ctx.fillText('Game Over! Score: '+score, canvas.width/2-140, canvas.height/2);
    ctx.fillText('Click or press Space to restart', canvas.width/2-180, canvas.height/2+40);
    return;
  }

  // Physics
  player.vy += gravity;
  player.y += player.vy;
  if(player.y+player.h >= 350){player.y=350-player.h;player.vy=0;player.jumping=false;}

  // Draw platforms
  platforms.forEach(p=>{
    drawPlatform(p);
    p.x -= speed;
  });

  // Recycle ground platform
  if(platforms[0].x+platforms[0].w<0){
    platforms[0].x = platforms[platforms.length-1].x + platforms[platforms.length-1].w;
    platforms.push(platforms.shift());
  }

  // Spawn obstacles
  spawnTimer++;
  if(spawnTimer>90){spawnObstacle();spawnTimer=0;}

  // Draw obstacles and check collision
  for(let i=obstacles.length-1;i>=0;i--){
    obstacles[i].x -= speed;
    drawSpike(obstacles[i].x,obstacles[i].y,obstacles[i].w,obstacles[i].h);

    // Collision
    if(player.x<obstacles[i].x+obstacles[i].w &&
       player.x+player.w>obstacles[i].x &&
       player.y<obstacles[i].y+obstacles[i].h &&
       player.y+player.h>obstacles[i].y){
         gameOver=true;
    }

    if(obstacles[i].x+obstacles[i].w<0) obstacles.splice(i,1);
  }

  // Draw player cube
  ctx.fillStyle='#0ff';
  ctx.shadowColor = '#0ff';
  ctx.shadowBlur = 20;
  ctx.fillRect(player.x,player.y,player.w,player.h);
  ctx.shadowBlur=0;

  // Score
  score++;
  document.getElementById('score').textContent='Score: '+score;
  if(score>highScore) highScore = score;

  // Speed increase
  if(score%500===0) speed+=0.5;

  requestAnimationFrame(update);
}

// Restart game
function restart(){
  if(gameOver){
    player.y=300; player.vy=0; player.jumping=false;
    obstacles=[]; spawnTimer=0; speed=5; score=0; gameOver=false;
    update();
  }
}

document.addEventListener('keydown', e=>{
  if(e.code==='Space') restart();
});
canvas.addEventListener('click', restart);

update();
</script>
</body>
</html>
